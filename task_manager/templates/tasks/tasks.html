{% extends "base.html" %}
{% load django_bootstrap5 %}

{% block content %}

<h1>Задачи</h1>

<a class="btn btn-primary w-10 mt-3 mb-3" href="{% url 'create_task' %}">Создать задачу</a>

<div class="card mb-4">
  <div class="card-body">
    <form method="get">
      <div class="row g-3">
        <div class="col-md-3">
          <label for="{{ filter.form.status.id_for_label }}" class="form-label">Статус</label>
          {{ filter.form.status }}
        </div>

        <div class="col-md-3">
          <label for="{{ filter.form.executor.id_for_label }}" class="form-label">Исполнитель</label>
          {{ filter.form.executor }}
        </div>

        <div class="col-md-3">
          <label for="{{ filter.form.labels.id_for_label }}" class="form-label">Метка</label>
          {{ filter.form.labels }}
        </div>

        <div class="col-md-3 d-flex align-items-end">
          <div class="form-check">
            {{ filter.form.self_tasks }}
            <label class="form-check-label" for="{{ filter.form.self_tasks.id_for_label }}">
              Только свои задачи
            </label>
          </div>
        </div>
      </div>

      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Показать</button>
      </div>
    </form>
  </div>
</div>

<table class="table table-striped">
    <thead>
    <tr>
      <th>ID</th>
      <th>Имя</th>
      <th>Статус</th>
      <th>Автор</th>
      <th>Исполнитель</th>
      <th>Дата создания</th>
      <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.id }}</td>
      <td>
          <a href="{% url 'tasks:detail' task.id %}">{{ task.name }}</a>
      </td>
      <td>{{ task.status }}</td>
      <td>{{ task.author }}</td>
      <td>{{ task.executor|default:"—" }}</td>
      <td>{{ task.created_at|date:"d.m.Y H:i" }}</td>
      <td>
          <a class="btn btn-primary btn-sm" href="{% url 'delete_task' task.id %}" role="button">Удалить</a>
          <a class="btn btn-primary btn-sm" href="{% url 'update_task' task.id %}" role="button">Изменить</a>
      </td>
    </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}